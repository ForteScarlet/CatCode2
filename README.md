<div align="center">
    <img src="./.catcode2/logo.png" alt="catcode logo"/>
    <h3>
        - ğŸ˜º CatCode â…¡ ğŸ˜º -
    </h3>
    <span>
        <a href="https://github.com/ForteScarlet/CatCode2" target="_blank">github</a>
    </span> 
    &nbsp;&nbsp; | &nbsp;&nbsp;
    <span>
        <a href="https://gitee.com/ForteScarlet/CatCode2" target="_blank">gitee</a>
    </span> <br />
    <small> &gt; æ„Ÿè°¢ <a href="https://github.com/ForteScarlet/simpler-robot" target="_blank">Simple Robot</a> å¼€å‘å›¢é˜Ÿæˆå‘˜åˆ¶ä½œçš„çŒ«çŒ«logo &lt; </small> <br />
    &gt; å¦‚æœæœ‰ç‚¹å‡»ä¸€ä¸‹â­çš„è¯ï¼ŒçŒ«çŒ«ä¼šå¾ˆå¼€å¿ƒå“¦~ &lt; <br />
    <a href="https://repo1.maven.org/maven2/love/forte/catcode2/" target="_blank" >
        <img src="https://img.shields.io/maven-central/v/love.forte.catcode2/catcode2-core" alt="maven-central" />
    </a>
    <a href="https://www.npmjs.com/package/@catcode2/core" target="_blank" >
            <img src="https://img.shields.io/npm/v/@catcode2/core/latest" alt="catcode2/core-latest" />
    </a>
    <a href="https://www.npmjs.com/package/@catcode2/core" target="_blank" >
        <img src="https://img.shields.io/npm/v/@catcode2/core/snapshot" alt="catcode2/core-snapshot" />
    </a>
</div>

*****

<div align="center">
    <h3>
        çŒ«çŒ«ç ï¼ˆCat Codeï¼‰ï¼Œä¸€ä¸ªå¯çˆ±çš„é€šç”¨ç‰¹æ®Šç ï¼ŒCQç çš„ç²¾ç¥å»¶ç»­ã€‚
    </h3>
</div>   

> <small><i>CatCode1å‰å¾€ [CatCode](https://github.com/ForteScarlet/CatCode) æŸ¥çœ‹ã€‚</i></small>

çŒ«çŒ«ç æ˜¯ä¸€ä¸ªå…·æœ‰ç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²æ ¼å¼ç¼–ç ï¼Œå®ƒçœ‹ä¸Šå»æ˜¯è¿™ä¸ªæ ·å­çš„ ğŸ‘‰ `[CAT:xxx,param1=value1,param2=value2]`

- ä»¥`[`å¼€å¤´ï¼Œ`]`ç»“å°¾ã€‚
- é¦–å…ˆæ˜¯çŒ«çŒ«ç çš„å¤´æ ‡è¯†(å¤§å°å†™æ•°å­—æˆ–ä¸‹åˆ’çº¿ï¼Œæ ‡å‡†åº”ä¸º`CAT`)
- å¤´æ ‡è¯†åæ˜¯çŒ«çŒ«ç çš„ç±»å‹(å¤§å°å†™æ•°å­—æˆ–ä¸‹åˆ’çº¿)ï¼Œä¸å¤´æ ‡è¯†ä¹‹é—´ä½¿ç”¨å†’å·`:`åˆ†å‰²ã€‚
- å‚æ•°ä¸ºå¤šä¸ªkeyä¸é‡å¤çš„é”®å€¼å¯¹ï¼Œä¸€å¯¹å‚æ•°ä½¿ç”¨`=`è¿æ¥é”®ä¸å€¼ï¼Œå¤šå¯¹å‚æ•°ä½¿ç”¨`,`åˆ†å‰²ã€‚
- å¯ä»¥æ²¡æœ‰å‚æ•°ã€‚
- åŒºåˆ†å¤§å°å†™ã€‚

### **çŒ«çŒ«æ˜¯ä¸¥æ ¼çš„ã€‚**

ä¸ºäº†é¿å…æ··æ·†æ•´ä¸ªå­˜åœ¨çŒ«çŒ«ç çš„æ–‡æœ¬ä¸­ä¸å…è®¸å‡ºç°ï¼š`[`ã€`]`ã€`&`
å­—ç¬¦å’Œåˆ¶è¡¨ç¬¦ä¸æ¢è¡Œç¬¦ï¼ŒçŒ«çŒ«ç æ–‡æœ¬å†…ä¸­é™¤äº†ä¸Šè¿°å­—ç¬¦å¤–ï¼Œè¿˜ä¸å…è®¸å‡ºç° `,` ä¸ `=` å­—ç¬¦ã€‚
å› æ­¤ï¼ŒçŒ«çŒ«ç çš„è½¬ä¹‰è§„åˆ™ä¸ºï¼š

| æº    | è½¬       |
|------|---------|
| `&`  | `&amp;` |
| `[`  | `&#91;` |
| `]`  | `&#93;` |
| `,`  | `&#44;` |
| `=`  | `&#61;` |
| `\n` | `&#13;` |
| `\r` | `&#10;` |
| `\t` | `&#09;` |


### **çŒ«çŒ«æ˜¯åŒ…å®¹çš„ã€‚**

ä»»ä½•ç¬¦åˆè§„åˆ™ `[HEAD:type,param=value,param=value,...]` çš„ç‰¹æ®Šç å‡å¯ä»¥è§†ä¸ºçŒ«çŒ«ç ï¼Œå°½ç®¡ `HEAD` å¯èƒ½å¹¶ä¸æ˜¯ `CAT`ã€‚

### **çŒ«çŒ«æ˜¯æ— å¤„ä¸åœ¨çš„ã€‚**

**CatCode2** æ ¸å¿ƒåº“åŸºäº [**Kotlin Multiplatform**](https://kotlinlang.org/docs/multiplatform.html) æ”¯æŒå¤šå¹³å°ï¼ˆJVMã€JSã€Nativeï¼‰ï¼Œ
å¹¶ä¸” **CatCode2** æä¾›äº†åŸºäº [**kotlinx-serialization**](https://github.com/Kotlin/kotlinx.serialization) çš„å¤šå¹³å°åºåˆ—åŒ–æ¨¡å—æ”¯æŒï¼Œ
ä½ å¯ä»¥å€ŸåŠ© **kotlinx-serialization** æ¥è‡ªå®šä¹‰ç»“æ„æ¥æè¿°ä½ çš„çŒ«çŒ«ç ã€åºåˆ—åŒ–/ååºåˆ—åŒ–ä½ çš„çŒ«çŒ«ç ã€‚

## åº”ç”¨

### [æ ¸å¿ƒåº“](catcode2-core)

[æ ¸å¿ƒåº“](catcode2-core) æä¾›äº†é’ˆå¯¹çŒ«çŒ«ç å­—ç¬¦ä¸²çš„è§£æã€è¯»å†™ä¸å°è£…çš„æ ¸å¿ƒåŸºç¡€åŠŸèƒ½ï¼Œæ˜¯æœ€ä¸»è¦ä¹Ÿæ˜¯æœ€åŸºæœ¬çš„æ¨¡å—ã€‚

å‰å¾€ [æ ¸å¿ƒåº“æ¨¡å—](catcode2-core) è·å–æ›´å¤šä¿¡æ¯ã€‚

### [åºåˆ—åŒ–åº“](catcode2-serialization)

**CatCode2** æä¾›äº†ä¸€äº›å…è®¸é€šè¿‡å®ä½“ç±»ä½œä¸ºè½½ä½“æ¥å¯¹çŒ«çŒ«ç è¿›è¡Œæè¿°çš„æ¨¡å—ï¼Œ
ä¾‹å¦‚å¯¹ [**kotlinx-serialization**](https://github.com/Kotlin/kotlinx.serialization) çš„å®ç°ã€‚

å‰å¾€ [åºåˆ—åŒ–æ¨¡å—](catcode2-serialization) è·å–æ›´å¤šä¿¡æ¯ã€‚


## é€Ÿè§ˆ

```kotlin
walkCatCodeContinuously(
    "[CAT:code,k1=v1,name=forte,tar=foo]",
    true,
    { head: String -> println("head = $head") },
    { type: String -> println("type = $type") }
) { key: String, value: String -> println("$key: $value") }
```

```kotlin
val cat = catOf("[CAT:at,code=123]")

cat.code
cat.toCode("CQ")
cat.head
cat.type
cat.keys

val code: Int by cat.provider.int
```

```kotlin
val cat = buildCat("foo", "CAT") {
    "key" - "value"
    set("foo", "bar", false)
    this["age"] = "18"
    key("name") value "forte"
}

val catCode = buildCatLiteral("foo") {
    "key" - "value"
    set("foo", "bar", false)
    this["age"] = "18"
    key("name") value "forte"
}
```


```kotlin
@Serializable
@SerialName("at") // or use @CatCodeTypeName("at")
data class At(val code: Long, val name: String)

fun sample() {
    val at = At(123456L, "forte")
    val catcode = CatCode.encodeToString(At.serializer(), at)
    val newAt = CatCode.decodeFromString(At.serializer(), catcode)
    
    // ...
}
```

## LICENSE

[MIT LICENSE](LICENSE).